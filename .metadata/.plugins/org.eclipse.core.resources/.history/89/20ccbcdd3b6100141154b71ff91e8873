package com.DR.dLib;

public abstract class dAnimation {

	private float currentTime = 0;
	private float duration = 0;
	private boolean isActive = false;
	private dObject animatedObject;
	private AnimationStatusListener animationListener;

	public dAnimation(dObject objectToAnimate, float duration, AnimationStatusListener listener)
	{
		animationListener = listener;
		animatedObject = objectToAnimate;
		this.duration = duration;
	}
	
	public void update(float delta)
	{
		if(currentTime < duration)
		{
			currentTime+=delta;
			animationListener.whileAnimating(currentTime, duration, delta);
			animate(currentTime, duration, delta);
		}
		else if(currentTime >= duration)
		{
			isActive = false;
			animationListener.onAnimationFinish();
		}
	}
	
	protected abstract void animate(float time, float duration, float delta);
	
	protected dObject getAnimatedObject()
	{
		return animatedObject;
	}
	
	public void start()
	{
		if(isActive == false)
		{
			isActive = true;
			animationListener.onAnimationStart(duration);
		}
	}

}
